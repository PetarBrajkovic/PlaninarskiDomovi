<app-navbar></app-navbar>

<ion-content>
  <!-- <ion-card class="ion-padding card">
    <ion-list lines="full">
      <ion-row style="border-bottom: 1px solid gray; margin-top: 5px;" *ngFor="let lodge of lodges"
        class="ion-align-items-center border">
        <ion-col offset="1" size="2">
          <img class="responsive" style="width: 100%; height:100%;" [src]="lodge.pictureUrl">
        </ion-col>
        <ion-col style="display: flex;" class="ion-justify-content-center" size="3">
          <label> {{lodge.name}} </label>
        </ion-col>
        <ion-col style="display: flex;" class="ion-justify-content-center" size="1">
          <label> {{lodge.height}}m </label>
        </ion-col>
        <ion-col style="display: flex;" class="ion-justify-content-center" size="2">
          <ion-button (click)="goToEdit(lodge._id)" fill="outline">Izmeni</ion-button>
        </ion-col>
        <ion-col style="display: flex;" class="ion-justify-content-center" size="2">
          <ion-button (click)="goToInfo(lodge._id)">Pregled</ion-button>
        </ion-col>
      </ion-row>
    </ion-list>
  </ion-card> -->
  <ion-accordion-group (ionChange)="accordionGroupChange($event)" class="card">
    <ion-accordion *ngFor="let lodge of lodges" [value]="lodge._id">
      <ion-item slot="header" color="light">
        <ion-row style="margin-top: 10px;" class="ion-align-items-center">
          <ion-col size="2">
            <img class="responsive" style="width: 100%; height:100%;" [src]="lodge.pictureUrl">
          </ion-col>
          <ion-col style="display: flex;" class="ion-justify-content-center" size="4">
            <label>Naziv: {{lodge.name}} </label>
          </ion-col>
          <ion-col style="display: flex;" class="ion-justify-content-center" size="2">
            <label>Visina: {{lodge.height}}m </label>
          </ion-col>
          <ion-col style="display: flex;" class="ion-justify-content-center" size="2">
            <ion-button (click)="goToInfo(lodge._id)">Pregled</ion-button>
          </ion-col>
          <ion-col style="display: flex;" class="ion-justify-content-center" size="2">
            <ion-button (click)="goToEdit(lodge._id)" fill="outline">Izmeni</ion-button>
          </ion-col>
        </ion-row>
      </ion-item>
      <div *ngIf="requests.length === 0" class="ion-padding" slot="content">
        Trenutno nema zahteva za rezervaciju
      </div>
      <div *ngIf="requests.length > 0" class="ion-padding" slot="content">
        <ion-row class="ion-align-items-center" *ngFor="let request of requests">
          <ion-col size="2">Korisnik: {{request.user[0].username}}</ion-col>
          <ion-col>Od datuma: {{request.startDate | date}}</ion-col>
          <ion-col>Do datuma: {{request.endDate | date}}</ion-col>
          <ion-col size="2">Broj kreveta: {{request.numberOfGuests}}</ion-col>
          <ion-col *ngIf="request.status === 'DEFAULT'">
            <ion-button (click)="updateReservation(request, 'CONFIRMED')" size="small"
              style="margin-right: 5px;">Potvrdi</ion-button>
            <ion-button (click)="updateReservation(request, 'DENIED')" size="small" fill="outline">Odbij</ion-button>
          </ion-col>
          <ion-col *ngIf="request.status === 'CONFIRMED'">
            <label>PotvrÄ‘en zahtev</label>
          </ion-col>
          <ion-col *ngIf="request.status === 'DENIED'">
            <label>Odbijen zahtev</label>
          </ion-col>
        </ion-row>
      </div>
    </ion-accordion>
  </ion-accordion-group>
</ion-content>